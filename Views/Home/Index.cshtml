@{
  ViewData["Title"] = "蹊モンガ";
}

<style>
  .centered-container { display: flex; justify-content: center; align-items: center; height: calc(95vh - 120px); }
  .fade-in { opacity: 0; transition: opacity 1s ease-in-out; }
  .fade-in.visible { opacity: 1; }
  .section-container { margin: 100px 0; }
  .fade-in-img-wrapper { overflow: hidden; height: 100%; position: relative; }
  .fade-in-img { width: 100%; height: auto; transform: translateX(200%) scale(2); transition: transform 1.5s ease-in-out; }
  .fade-in-img-wrapper.visible .fade-in-img { transform: translateX(0) scale(1); }
  .fade-in-img-left { transform: translateX(-200%) scale(2); }
  .fade-in-img-wrapper.visible .fade-in-img-left { transform: translateX(0) scale(1); }
  .wave-text span { display: inline-block; opacity: 0; position: relative; }
</style>

<div class="container centered-container text-center fade-in">
  <div class="content">
    <h1 class="wave-text" id="title">@ViewData["Title"]</h1>
    <img src="https://www.pokemon.com/static-assets/content-assets/cms2/img/pokedex/full/587.png" class="img-fluid" alt="エモンガ" width="250px">
    <p class="mt-4 wave-text" id="description">
      "ポケモンの魅力を伝えたい"<br>
      成蹊大学ポケモンサークルの公式ホームページです。
    </p>
  </div>
</div>

<div class="container section-container fade-in">
  <div class="row align-items-center">
    <div class="col-md-6 text-center">
      <h2 class="wave-text" id="about">サークルについて</h2>
    </div>
    <div class="col-md-6 text-center fade-in-img-wrapper">
      <img src="https://horizons.pokemon.com/_images/home/gallery/hz-gallery-img-11-2x.jpg" class="img-fluid fade-in-img" alt="サークルについて">
    </div>
  </div>
</div>

<div class="container section-container fade-in">
  <div class="row align-items-center flex-row-reverse">
    <div class="col-md-6 text-center">
      <h2 class="wave-text" id="activity">活動記録</h2>
    </div>
    <div class="col-md-6 text-center fade-in-img-wrapper">
      <img src="https://horizons.pokemon.com/_images/home/gallery/hz-gallery-img-10-2x.jpg" class="img-fluid fade-in-img fade-in-img-left" alt="活動記録">
    </div>
  </div>
</div>

<div class="container section-container fade-in">
  <div class="row align-items-center">
    <div class="col-md-6 text-center">
      <h2 class="wave-text" id="contact">お問い合わせ</h2>
    </div>
    <div class="col-md-6 text-center fade-in-img-wrapper">
      <img src="https://horizons.pokemon.com/_images/home/gallery/hz-gallery-img-1-2x.jpg" class="img-fluid fade-in-img" alt="お問い合わせ">
    </div>
  </div>
</div>

@section Scripts {
  <script>
    $(document).ready(function() {
      function checkVisibility() {
        $('.fade-in').each(function() {
          var elementTop = $(this).offset().top;
          var elementBottom = elementTop + $(this).outerHeight();
          var viewportTop = $(window).scrollTop();
          var viewportBottom = viewportTop + $(window).height();

          if (elementBottom > viewportTop && elementTop < viewportBottom) {
            $(this).addClass('visible');
          } else {
            $(this).removeClass('visible');
          }
        });

        $('.fade-in-img-wrapper').each(function() {
          var elementTop = $(this).offset().top;
          var elementBottom = elementTop + $(this).outerHeight();
          var viewportTop = $(window).scrollTop();
          var viewportBottom = viewportTop + $(window).height();

          if (elementBottom > viewportTop && elementTop < viewportBottom) {
            $(this).addClass('visible');
          } else {
            $(this).removeClass('visible');
          }
        });
      }

      function applyWaveEffect() {
        $('.wave-text').each(function() {
          var text = $(this).text();
          $(this).html('');
          for (var i = 0; i < text.length; i++) {
            $(this).append('<span>' + text.charAt(i) + '</span>');
          }

          $(this).find('span').each(function(index) {
            $(this).delay(index * 100).animate({
              opacity: 1,
              top: '-=10px'
            }, 300).animate({
              top: '+=10px'
            }, 300);
          });
        });
      }

      $(window).on('scroll resize', function() {
        checkVisibility();
      });

      checkVisibility();
      applyWaveEffect();
    });
  </script>
}
